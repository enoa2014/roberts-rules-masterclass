<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—å››ï¼šæ²‰æµ¸å¼å®æˆ˜æ¼”ç»ƒåœº | è®®äº‹è§„åˆ™å¤§å¸ˆè¯¾</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@700&family=Noto+Sans+SC:wght@400;500;700&display=swap"
        rel="stylesheet">
    <style>
        .sim-wrapper {
            max-width: 1000px;
            margin: 0 auto;
            background: #fff;
            border: 1px solid var(--border);
            border-radius: 12px;
            display: grid;
            grid-template-columns: 1fr 350px;
            height: 700px;
            overflow: hidden;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] .sim-wrapper {
            background: var(--bg-card);
        }

        .chat-pane {
            display: flex;
            flex-direction: column;
            background: #f8fafc;
        }

        [data-theme="dark"] .chat-pane {
            background: #0f172a;
        }

        .chat-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            background: #fff;
        }

        [data-theme="dark"] .chat-header {
            background: var(--bg-card);
        }

        .chat-log {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .msg {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 12px;
            line-height: 1.6;
            font-size: 0.95rem;
            position: relative;
            animation: slideIn 0.3s ease;
        }

        .msg-npc {
            background: #fff;
            border: 1px solid var(--border);
            border-bottom-left-radius: 2px;
            align-self: flex-start;
        }

        [data-theme="dark"] .msg-npc {
            background: var(--bg-card);
            border-color: var(--border);
        }

        .msg-player {
            background: var(--accent);
            color: #fff;
            border-bottom-right-radius: 2px;
            align-self: flex-end;
        }

        .msg-system {
            align-self: center;
            background: rgba(0, 0, 0, 0.05);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #64748b;
        }

        .control-pane {
            background: #fff;
            border-left: 1px solid var(--border);
            display: flex;
            flex-direction: column;
        }

        [data-theme="dark"] .control-pane {
            background: var(--bg-card);
        }

        .status-bar {
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 4px;
        }

        .fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.5s;
        }

        .options-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .choice-btn {
            background: transparent;
            border: 1px solid var(--border);
            padding: 15px;
            text-align: left;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
            color: var(--text-main);
        }

        .choice-btn:hover {
            background: var(--accent-bg);
            border-color: var(--accent);
            color: var(--accent);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile */
        @media (max-width: 800px) {
            .sim-wrapper {
                grid-template-columns: 1fr;
                height: auto;
                display: flex;
                flex-direction: column;
            }

            .chat-pane {
                height: 400px;
            }

            .control-pane {
                min-height: 300px;
            }
        }
    </style>
</head>

<body>
    <nav class="sidebar"></nav>

    <div class="main-wrapper">
        <header class="top-bar">
            <div class="breadcrumbs">å¤§å¸ˆè¯¾ > æ¨¡å—å›› > æ²‰æµ¸å¼å®æˆ˜</div>
        </header>

        <main class="content" style="max-width: 1200px;">
            <div style="margin-bottom: 20px;">
                <h1>æ¨¡å—å››ï¼šæ²‰æµ¸å¼å®æˆ˜æ¼”ç»ƒ</h1>
                <p>æœ¬æ¨¡å—åŸºäºã€Šè®®èµ·è¯»æ•™å¸ˆåŸ¹è®­ã€‹çœŸå®æ¡ˆä¾‹æ”¹ç¼–ã€‚ä½ å°†æ‰®æ¼”å®¶åº­ä¼šè®®çš„ä¸»æŒäººï¼ˆçˆ¸çˆ¸ï¼‰ï¼Œå¼•å¯¼ä¸€åœºå…³äº"å‹å²é’±ä¸æ¸¸æˆå……å€¼"çš„å±æœºå…¬å…³ã€‚</p>
            </div>

            <!-- Launcher -->
            <div id="launcher" style="display:grid; grid-template-columns: 1fr; gap:20px; margin-bottom:30px;">
                <div class="card" style="cursor:pointer; border-left: 5px solid var(--accent);"
                    onclick="startEngine('family')">
                    <h3 style="margin-top:0">ğŸ¡ æ·±åº¦æ¡ˆä¾‹ï¼šè°åŠ¨äº†æˆ‘çš„å‹å²é’±ï¼Ÿ</h3>
                    <p><strong>èƒŒæ™¯ä¿¡æ¯ï¼š</strong></p>
                    <ul style="font-size: 0.9rem; color: #64748b;">
                        <li><strong>ä¸»è§’ï¼š</strong> 10å²å„¿å­ï¼ˆå››å¹´çº§ï¼‰ï¼Œå–œæ¬¢ç©æŸæ¬¾æµè¡Œæ‰‹æ¸¸ã€‚</li>
                        <li><strong>å¯¼ç«ç´¢ï¼š</strong> å¥¶å¥¶ç§ä¸‹å¥–åŠ±äº†å­™å­300å…ƒç°é‡‘ã€‚å­©å­ç”¨å€Ÿæ¥çš„æ‰‹æœºå……å€¼äº†200å…ƒæ¸¸æˆå¡ã€‚</li>
                        <li><strong>å†²çªç‚¹ï¼š</strong> å¦ˆå¦ˆå‘ç°åå¤§æ€’ã€‚å­©å­è®¤ä¸º"è¿™æ˜¯ä¸€å¹´å‰çº¦å®šå¥½çš„å½’æˆ‘ç®¡ç†çš„é’±"ã€‚</li>
                        <li><strong>ä½ çš„ä»»åŠ¡ï¼š</strong> è¿ç”¨"æ”¹å†™æ”»å‡»æ€§è¯­è¨€"æŠ€å·§ï¼Œå¼•å¯¼å¤§å®¶ç†æ€§è¡¨è¾¾ï¼Œæœ€åå®Œæˆä¸€æ¬¡æœ‰æ•ˆçš„"å¤šæ•°å†³"ã€‚</li>
                    </ul>
                    <button class="btn" style="margin-top:10px">å¼€å§‹æ¨¡æ‹Ÿ</button>
                </div>
            </div>

            <!-- Simulation Interface -->
            <div id="simInterface" class="sim-wrapper" style="display:none;">
                <div class="chat-pane">
                    <div class="chat-header">
                        <span id="sceneTitle">å®¶åº­ä¼šè®®</span>
                        <span style="font-size:0.8rem; color:#64748b;">Round <span id="roundNum">1</span></span>
                    </div>
                    <div id="chatLog" class="chat-log"></div>
                </div>
                <div class="control-pane">
                    <div class="status-bar">
                        <div class="stat-row">
                            <span>ğŸ› ç§©åºå€¼ (Order)</span>
                            <span id="scoreOrder">50</span>
                        </div>
                        <div class="progress-bar">
                            <div id="barOrder" class="fill" style="width:50%"></div>
                        </div>
                        <div style="height:15px"></div>
                        <div class="stat-row">
                            <span>ğŸ¤ ç†æ€§å€¼ (Reason)</span>
                            <span id="scoreConsensus">50</span>
                        </div>
                        <div class="progress-bar">
                            <div id="barConsensus" class="fill" style="width:50%; background:#22c55e;"></div>
                        </div>
                    </div>
                    <div id="optionsArea" class="options-area"></div>
                </div>
            </div>

            <!-- Case Analysis Section -->
            <section id="case-analysis" style="margin-top: 60px;">
                <h2>4.2 æ¡ˆä¾‹å¤ç›˜ï¼šè§„åˆ™èƒŒåçš„å¿ƒç†å­¦</h2>
                <p>å®Œæˆæ¨¡æ‹Ÿåï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ†æä¸ºä»€ä¹ˆè¿™äº›è§„åˆ™å¦‚æ­¤æœ‰æ•ˆã€‚</p>

                <div class="insight-card">
                    <h4>ğŸ’¡ æ´å¯Ÿ1ï¼šç ´è§£"è°çš„é’±"å›°å±€</h4>
                    <p>å½“å­©å­è¯´"è¿™æ˜¯<strong>æˆ‘çš„é’±</strong>"æ—¶ï¼Œä»–é™·å…¥äº†é›¶å’Œåšå¼ˆçš„å¿ƒç†æ¡†æ¶ã€‚è§„åˆ™çš„åŠ›é‡åœ¨äºï¼š<strong>é€šè¿‡ç¨‹åºï¼Œå°†äº‰è®®ä»"æ‰€æœ‰æƒ"åˆ‡æ¢åˆ°"ä½¿ç”¨æƒçš„ç¨‹åºæ­£ä¹‰"</strong>ã€‚
                    </p>
                    <p>å­©å­ä¸å†çº ç»“é’±å±äºè°ï¼Œè€Œæ˜¯å¼€å§‹æ€è€ƒ"æˆ‘æ˜¯å¦éµå®ˆäº†èŠ±é’±çš„ç¨‹åº"ã€‚è¿™æ˜¯ä¸€æ¬¡è®¤çŸ¥æ¡†æ¶çš„é‡ç½®ã€‚</p>
                </div>

                <div class="insight-card">
                    <h4>ğŸ’¡ æ´å¯Ÿ2ï¼šä¸ºä»€ä¹ˆ"å†»ç»“"æ¯”"æ²¡æ”¶"é«˜æ˜ï¼Ÿ</h4>
                    <p>å¦‚æœç›´æ¥æ²¡æ”¶100å…ƒï¼Œå­©å­å†…å¿ƒæ˜¯"æˆ‘è¢«æŠ¢äº†"ã€‚ä½†"<strong>å†»ç»“3ä¸ªæœˆ</strong>"æ˜¯ä¸€ç§<strong>å»¶æœŸä»˜å§”</strong>â€”â€”é’±è¿˜æ˜¯ä½ çš„ï¼Œåªæ˜¯æš‚æ—¶ä¸èƒ½åŠ¨ã€‚</p>
                    <p>è¿™è®©å­©å­äº²èº«ä½“éªŒåˆ°"<strong>é€‰æ‹©å³ä»£ä»·</strong>"â€”â€”ç”¨3ä¸ªæœˆçš„"è´«ç©·"æ¢å–äº†å½“ä¸‹çš„"æ¸¸æˆæƒç›Š"ã€‚è¿™æ˜¯ä¸€æ¬¡çè´µçš„ç»æµå­¦ä¸æ³•å­¦æ•™è‚²ã€‚</p>
                </div>

                <div class="insight-card">
                    <h4>ğŸ’¡ æ´å¯Ÿ3ï¼š"é¢å‘ä¸»æŒ"çš„å»äººæ ¼åŒ–æ•ˆåº”</h4>
                    <p>ä¸ºä»€ä¹ˆè¦æ±‚æ‰€æœ‰äººå¯¹ç€çˆ¸çˆ¸è¯´è¯ï¼Ÿå› ä¸ºè¿™<strong>åˆ‡æ–­äº†å†²çªåŒæ–¹çš„ç›®å…‰å¯¹è§†</strong>ã€‚å¦ˆå¦ˆä¸å†ç›´è§†å­©å­ï¼Œå­©å­ä¸å†ç›´è§†å¦ˆå¦ˆã€‚æ€’æ°”ä¼ é€’çš„é€šé“è¢«é˜»æ–­ã€‚</p>
                    <p>å½“å­©å­å¿…é¡»ç»„ç»‡è¯­è¨€è¯´"ä¸»å¸­ï¼Œæˆ‘è®¤ä¸ºå¦ˆå¦ˆçš„è§‚ç‚¹â€¦â€¦"æ—¶ï¼Œä»–è¢«è¿«è°ƒç”¨<strong>å¤§è„‘çš®å±‚çš„ç†æ€§åŒºåŸŸ</strong>æ¥ç»„ç»‡è¯­è¨€ï¼Œè€Œä¸æ˜¯ç”¨æä»æ ¸æ¥å®£æ³„æƒ…ç»ªã€‚è¿™å®é™…ä¸Šæ˜¯ä¸€ç§é«˜é˜¶çš„æƒ…ç»ªè°ƒèŠ‚è®­ç»ƒã€‚
                    </p>
                </div>

                <div class="highlight-box">
                    <strong>ğŸ¯ æ ¸å¿ƒå¯ç¤ºï¼š</strong>è§„åˆ™ä¸æ˜¯å†·å†°å†°çš„æŸç¼šï¼Œè€Œæ˜¯ä¿æŠ¤æ¯ä¸ªäººå…å—æƒ…ç»ªä¼¤å®³çš„"å®‰å…¨æ°”å›Š"ã€‚
                </div>
            </section>

            <div style="margin-top: 40px; text-align: right;">
                <a href="module-5.html" class="btn">ä¸‹ä¸€ç« ï¼šå·¥å…·ç®± &rarr;</a>
            </div>

        </main>
    </div>

    <script src="../scripts/main.js"></script>
    <script>
        const SCENE = {
            title: "å®¶åº­ä¼šè®®ï¼šæ¸¸æˆå……å€¼é£æ³¢",
            init: { order: 50, consensus: 40 },
            nodes: {
                start: {
                    text: "ã€Round 1: çˆ†å‘ã€‘\n\næ™šé¥­åï¼Œå¦ˆå¦ˆæŠŠæ‰‹æœºæ‹åœ¨æ¡Œå­ä¸Šã€‚\nå¦ˆå¦ˆï¼š'æ°”æ­»æˆ‘äº†ï¼æ‰å››å¹´çº§å°±æ•¢å……200å—é’±æ¸¸æˆï¼è¿™å­©å­åºŸäº†ï¼'\n\nå­©å­ç¼©åœ¨æ²™å‘è§’ï¼Œå¥¶å¥¶æŠ¤ç€å­©å­ï¼š'å“å‘€ï¼Œæ˜¯æˆ‘ç»™ä»–çš„å¥–åŠ±ï¼Œå­©å­ç©ç©æ€ä¹ˆäº†ã€‚'\n\nä½œä¸ºçˆ¸çˆ¸ï¼ˆä¸»æŒäººï¼‰ï¼Œä½ çš„ç¬¬ä¸€å¥è¯è‡³å…³é‡è¦ã€‚",
                    opts: [
                        { txt: "é™„å’Œå¦ˆå¦ˆï¼š'æ…ˆæ¯å¤šè´¥å„¿ï¼å¦ˆä½ ä¹ŸçœŸæ˜¯çš„ï¼'", next: 'f_bias', dOrder: -20, dConsensus: -20 },
                        { txt: "æ•²å‡»æ°´æ¯ï¼š'ç°åœ¨å¬å¼€å®¶åº­ä¼šè®®ã€‚è¯·å¤§å®¶åå¥½ï¼Œæˆ‘ä»¬æŒ‰è§„åˆ™æ¥è°ˆã€‚'", next: 'f_intro', dOrder: 20, dConsensus: 10 }
                    ]
                },
                f_intro: {
                    text: "å¤§å®¶è™½ç„¶ä¸æƒ…æ„¿ï¼Œä½†è¿˜æ˜¯ååˆ°äº†æ¡Œè¾¹ã€‚\n\nä½ ï¼š'ä»Šå¤©çš„è®®é¢˜æ˜¯å…³äºå­©å­æ¸¸æˆå……å€¼çš„äº‹ã€‚æ ¹æ®ã€ä¸æ”»å‡»åŸåˆ™ã€‘ï¼Œæˆ‘ä»¬åªè°ˆè¡Œä¸ºï¼Œä¸è´´æ ‡ç­¾ã€‚'\n\nå¦ˆå¦ˆç«‹åˆ»å¿ä¸ä½äº†ï¼š'ä»€ä¹ˆä¸è´´æ ‡ç­¾ï¼Ÿä»–è¿™å°±æ˜¯è‡ªç§ï¼åªé¡¾è‡ªå·±çˆ½ï¼Œä¸ç®¡å¤§äººèµšé’±è¾›è‹¦ï¼'\n\nç³»ç»Ÿæç¤ºï¼šè¿™æ˜¯ä¸€ä¸ªã€æ”»å‡»æ€§å‘è¨€ã€‘ï¼Œä½ éœ€è¦å¼•å¯¼å¦ˆå¦ˆã€æ”¹å†™ã€‘å®ƒã€‚",
                    opts: [
                        { txt: "æ‰“æ–­å¦ˆå¦ˆï¼š'ä½ è¿è§„äº†ï¼é—­å˜´ï¼'", next: 'f_rude', dOrder: 10, dConsensus: -20 },
                        { txt: "æ¸©å’Œå¼•å¯¼ï¼š'å¦ˆå¦ˆï¼Œè¯·æŠŠ[è‡ªç§]è¿™ä¸ªè¯„ä»·ï¼Œæ”¹æˆå…·ä½“çš„[äº‹å®]å’Œä½ çš„[æ„Ÿå—]ã€‚'", next: 'f_rewrite_1', dOrder: 10, dConsensus: 20 }
                    ]
                },
                f_rewrite_1: {
                    text: "å¦ˆå¦ˆæ·±å¸ä¸€å£æ°”ï¼Œè¯•ç€æ”¹å†™ã€‚\n\nå¦ˆå¦ˆï¼š'å¥½å§... æˆ‘çš„æ„æ€æ˜¯ï¼Œè¿™ä¸ªæ–¹æ¡ˆæ²¡æœ‰å……åˆ†è€ƒè™‘åˆ°å®¶åº­çš„æ•´ä½“å¼€æ”¯ã€‚200å—æ˜¯æˆ‘ä»¬ä¸€å‘¨çš„ä¹°èœé’±ã€‚'\n\nå­©å­å¬äº†ï¼Œå¤´æŠ¬èµ·æ¥ä¸€ç‚¹ï¼š'å¯æ˜¯å»å¹´ç”Ÿæ—¥ä½ ä»¬è¯´è¿‡ï¼Œé›¶èŠ±é’±å½’æˆ‘è‡ªå·±ç®¡ã€‚'\n\nå¦ˆå¦ˆåˆæ€¥äº†ï¼š'ä½ å°±æ˜¯æƒ³æ§åˆ¶ä¸€åˆ‡ï¼ä¸æƒ³è®©æˆ‘ä»¬ç®¡ä½ ï¼'\n\nå†æ¬¡è§¦å‘ã€æ”¹å†™ä»»åŠ¡ã€‘ã€‚ä½ å¦‚ä½•å¼•å¯¼ï¼Ÿ",
                    opts: [
                        { txt: "æ— è§†ï¼Œè®©å­©å­åå‡»", next: 'f_fight', dOrder: -10, dConsensus: -10 },
                        { txt: "å¼•å¯¼ï¼š'å¦ˆå¦ˆæ˜¯æ‹…å¿ƒè¿™ç§åšæ³•ä¼šé™åˆ¶æˆ‘ä»¬å¯¹ä½ çš„å¼•å¯¼ï¼Œè€Œä¸æ˜¯æƒ³æ§åˆ¶ä½ ã€‚'", next: 'f_rewrite_2', dOrder: 20, dConsensus: 20 }
                    ]
                },
                f_rewrite_2: {
                    text: "é€šè¿‡ä¸¤æ¬¡æ”¹å†™ï¼Œç«è¯å‘³æ•£å»äº†ï¼Œå¤§å®¶å¼€å§‹è®¨è®ºäº‹æƒ…æœ¬èº«ã€‚\n\nå­©å­ï¼š'æˆ‘çŸ¥é“é’±å¾ˆè¾›è‹¦ï¼Œä½†æˆ‘ä»¥ä¸ºé‚£300å—æ˜¯æˆ‘çš„ã€‚è€Œä¸”æˆ‘å€ŸåŒå­¦æ‰‹æœºç©ï¼Œæ˜¯å› ä¸ºæˆ‘æƒ³èå…¥é›†ä½“ã€‚'\n\nè¿™å°±æ˜¯ã€ç†æ€§ã€‘çš„åŠ›é‡ã€‚å¤§å®¶å¬åˆ°äº†å½¼æ­¤çš„éœ€æ±‚ã€‚\n\nç°åœ¨è¿›å…¥åŠ¨è®®ç¯èŠ‚ã€‚å­©å­æè®®ï¼š'ä»¥åæˆ‘å……å€¼å‰å…ˆç”³è¯·ã€‚' \nå¦ˆå¦ˆæè®®ï¼š'æ²¡æ”¶å‰©ä¸‹100å…ƒï¼Œä½œä¸ºæƒ©ç½šã€‚'\nå¥¶å¥¶ï¼š'æˆ‘å¼ƒæƒï¼Œæˆ‘ä¸æ‡‚ã€‚'\n\nç°åœ¨è¿›è¡Œè¡¨å†³ï¼ˆå‡è®¾åªæœ‰çˆ¸å¦ˆå­©3äººæœ‰ç¥¨ï¼‰ã€‚\nä½ æ”¯æŒè°ï¼Ÿ",
                    opts: [
                        { txt: "æ”¯æŒå¦ˆå¦ˆ (2ç¥¨èµæˆï¼Œ1ç¥¨åå¯¹)", next: 'f_result_mom', dOrder: 0, dConsensus: -10 },
                        { txt: "æå‡ºä¿®æ­£æ¡ˆï¼š'ä¸æ²¡æ”¶ï¼Œä½†å†»ç»“3ä¸ªæœˆ' (å¯»æ‰¾æŠ˜ä¸­)", next: 'f_adjourn', dOrder: 20, dConsensus: 30 }
                    ]
                },
                f_bias: { text: "ä½ å¤±å»äº†ä¸­ç«‹ã€‚å¥¶å¥¶æ‹‰ç€å­©å­è¿›å±‹äº†ï¼Œä¼šè®®è§£æ•£ã€‚\nã€Game Overã€‘", end: true },
                f_rude: { text: "ç”±äºä½ æ€åº¦ç²—æš´ï¼Œå¦ˆå¦ˆæ°”å“­äº†ã€‚ä¼šè®®æ— æ³•è¿›è¡Œã€‚\nã€Game Overã€‘", end: true },
                f_result_mom: { text: "å†³è®®é€šè¿‡ã€‚å­©å­è™½ç„¶ä¸æœï¼Œä½†æ‰¿è®¤ç¨‹åºæ˜¯å…¬æ­£çš„ã€‚\nã€ç»“å±€ï¼šç¨‹åºæ­£ä¹‰ã€‘", end: true },
                f_adjourn: {
                    text: "è¿™æ˜¯ä¸€ä¸ªé«˜æ˜çš„ã€ä¿®æ­£æ¡ˆã€‘ã€‚å­©å­è§‰å¾—é’±è¿˜åœ¨ï¼Œå¦ˆå¦ˆè§‰å¾—æœ‰æƒ©ç½šã€‚\n\næœ€åè¡¨å†³ï¼š\nä¸»æŒäººï¼š'æ‰€æœ‰èµæˆçš„è¯·ä¸¾æ‰‹...'\nï¼ˆçˆ¸çˆ¸ã€å­©å­ä¸¾æ‰‹ï¼‰\nä¸»æŒäººï¼š'æ‰€æœ‰åå¯¹çš„è¯·ä¸¾æ‰‹...'\nï¼ˆå¦ˆå¦ˆä¸¾æ‰‹ï¼‰\n\nç»“æœï¼š2ç¥¨èµæˆ > 1ç¥¨åå¯¹ã€‚\næ ¹æ®ã€å¤šæ•°å†³ã€‘è§„åˆ™ï¼Œå†³è®®é€šè¿‡ï¼\n\nã€å®Œç¾ç»“å±€ï¼šç†æ€§çš„èƒœåˆ©ã€‘",
                    end: true
                }
            }
        };

        let state = {
            scene: null,
            order: 50,
            con: 50,
            log: []
        };

        function startEngine(sceneId) {
            document.getElementById('launcher').style.display = 'none';
            document.getElementById('simInterface').style.display = 'grid';

            state.scene = SCENE;
            // Reset state
            state.order = SCENE.init.order;
            state.con = SCENE.init.consensus;

            document.getElementById('sceneTitle').innerText = SCENE.title;
            updateStats();
            renderNode('start');
        }

        function renderNode(nodeId) {
            const data = state.scene.nodes[nodeId];
            const chatLog = document.getElementById('chatLog');

            // Add NPC Msg
            const msgDiv = document.createElement('div');
            msgDiv.className = 'msg msg-npc';
            msgDiv.innerText = data.text;
            chatLog.appendChild(msgDiv);
            chatLog.scrollTop = chatLog.scrollHeight;

            // Options
            const optsArea = document.getElementById('optionsArea');
            optsArea.innerHTML = '';

            if (data.end) {
                const btn = document.createElement('button');
                btn.className = 'choice-btn';
                btn.innerText = 'ğŸ”„ æ¨¡æ‹Ÿç»“æŸï¼Œè¿”å›';
                btn.style.background = '#e2e8f0';
                btn.onclick = () => location.reload();
                optsArea.appendChild(btn);
            } else {
                data.opts.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    btn.innerText = opt.txt;
                    btn.onclick = () => {
                        // Update Stats
                        state.order = Math.min(100, Math.max(0, state.order + (opt.dOrder || 0)));
                        state.con = Math.min(100, Math.max(0, state.con + (opt.dConsensus || 0)));
                        updateStats();

                        // Add Player Msg
                        const pDiv = document.createElement('div');
                        pDiv.className = 'msg msg-player';
                        pDiv.innerText = opt.txt;
                        chatLog.appendChild(pDiv);

                        setTimeout(() => renderNode(opt.next), 800);
                    };
                    optsArea.appendChild(btn);
                });
            }
        }

        function updateStats() {
            document.getElementById('scoreOrder').innerText = state.order;
            document.getElementById('barOrder').style.width = state.order + '%';

            document.getElementById('scoreConsensus').innerText = state.con;
            document.getElementById('barConsensus').style.width = state.con + '%';
        }
    </script>
</body>

</html>