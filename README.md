# 议起读课程学习与互动平台

面向小初中教师/家长的课程整合与课堂互动 Web 平台。

## 项目概述

本项目目标是将课程学习、课堂互动、课后复盘整合到一个统一网站中，核心能力包括：

1. 课程内容整合学习（规则、阅读、工具、资源）
2. 课堂实时互动（举手、发言计时、投票）
3. 课后闭环（作业、反馈、留言讨论）
4. 资格鉴定与权限控制（邀请码升级学员资格）

当前首发范围：

- 登录方式：用户名 + 密码
- 阅读站策略：先整体嵌入，再逐步重构
- 部署方式：Docker Compose（推荐）
- 短信登录：MVP+1（后续增强）

## 当前状态

当前仓库已进入“可部署 + 可回归”阶段，核心能力已落地：

1. 账号鉴权与角色路由控制
2. 课程学习、阅读探究、互动课堂、作业反馈、讨论治理
3. 管理后台（用户、邀请码、设置、治理、反馈）
4. Docker 化部署与 ECS 运行
5. API 冒烟 + Playwright E2E（含线上回归）

## 目录结构

```text
tttt/
├── docs/                        # 主文档目录（需求/设计/接口/测试/部署）
├── res/                         # 课程原始素材（PPT、图片、分析报告）
├── archive/                     # 历史产物归档（旧代码、压缩包）
├── openspec/                    # 规范/提案相关文件（如有）
├── DEPLOY.md                    # 早期部署说明（保留）
├── 需求与现有资源清单.md          # 统一需求基线（V6）
└── README.md                    # 本文件
```

## 文档入口

- 文档总索引：`docs/00-文档索引.md`
- 需求基线：`需求与现有资源清单.md`
- API 合同：`docs/04-API合同.md`
- 联调与冒烟手册：`docs/13-前后端联调与API冒烟手册.md`
- 部署与运维手册：`docs/08-部署与运维手册.md`
- 中文使用手册：`docs/14-平台使用手册.md`

## 推荐阅读顺序

1. `需求与现有资源清单.md`
2. `docs/00-文档索引.md`
3. `docs/01-MVP范围与验收标准.md`
4. `docs/02-信息架构与路由权限清单.md`
5. `docs/04-API合同.md`
6. `docs/13-前后端联调与API冒烟手册.md`
7. `docs/08-部署与运维手册.md`
8. `docs/14-平台使用手册.md`

## 角色分工

- Codex：后端、数据库、权限、SSE、部署与测试
- 前端实现：基于仓内组件体系持续迭代（不再依赖特定外部交接文档）

详见：`docs/00-文档索引.md`

## 开发启动建议

1. 先阅读 `docs/02-信息架构与路由权限清单.md` 与 `docs/04-API合同.md`
2. 接口变更先更新 `docs/04-API合同.md` 再改代码
3. 发布前执行 `docs/13-前后端联调与API冒烟手册.md` 中回归命令

## 本地运行与冒烟

1. 推迁移：

```bash
npm run db:push
```

2. 启动服务：

```bash
NEXTAUTH_SECRET=dev-smoke-secret NEXTAUTH_URL=http://127.0.0.1:3000 npm run dev
```

3. 新开终端执行冒烟：

```bash
npm run smoke:all
```

4. 发布后最小回归（健康检查 + 冒烟链路）：

```bash
npm run verify:release
```

说明：

- `smoke:seed` 会创建/重置冒烟账号与邀请码。
- `smoke:api` 会自动走完互动、作业、反馈、讨论、治理主流程。

## 归档说明

历史压缩包与旧静态站代码已归档到：

- `archive/2026-02-15/packages/`
- `archive/2026-02-15/legacy-static-site/`

归档记录见：`archive/2026-02-15/ARCHIVE_NOTES.md`
